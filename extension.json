{
	"name": "Interactive Data Maps",
	"version": "0.10.6",

	"author": [
		"alex4401"
	],
	"url": "https://gitlab.mglolenstine.xyz/alex4401/mediawiki-extension-datamaps",
	"descriptionmsg": "datamap-desc",
	"license-name": "GPL-2.0-or-later",
	"type": "parserhook",

	"requires": {
		"MediaWiki": ">= 1.37.0",
		"platform": {
			"php": ">= 7.4"
		}
	},

	"MessagesDirs": {
		"DataMaps.class": [
			"i18n"
		]
	},
	"ExtensionMessagesFiles": {
		"DataMapsMagic": "DataMaps.magic.php"
	},

	"TrackingCategories": [
		"datamap-category-pages-including-maps"
	],

	"ResourceFileModulePaths": {
		"localBasePath": "resources",
		"remoteExtPath": "DataMaps/resources"
	},

	"ResourceModules": {
		"ext.ark.datamaps.leaflet.core": {
			"scripts": [
				"vendor/leaflet/leaflet.js"
			],
			"styles": [
				"vendor/leaflet/leaflet.css"
			],
			"targets": [ "desktop", "mobile" ]
		},
		"ext.ark.datamaps.leaflet.extra": {
			"es6": true,
			"dependencies": [
				"ext.ark.datamaps.leaflet.core"
			],
			"packageFiles": [
				"leafletExtension/index.js",
				"leafletExtension/iconMarker.js",
				"leafletExtension/circleMarker.js",
				"leafletExtension/popup.js"
			],
			"targets": [ "desktop", "mobile" ]
		},

		"ext.ark.datamaps.icons": {
			"class": "ResourceLoaderOOUIIconPackModule",
			"icons": [
				"exitFullscreen",
				"fullScreen",
				"expand",
				"link"
			]
		},

		"ext.ark.datamaps.styles": {
			"dependencies": [
				"ext.ark.datamaps.icons"
			],
			"styles": [
				"styles/main.less",
				"styles/legend.less",
				"styles/controls.less",
				"styles/popups.less"
			],
			"targets": [ "desktop", "mobile" ]
		},

		"ext.ark.datamaps.core": {
			"es6": true,
			"dependencies": [
				"mediawiki.api"
			],
			"packageFiles": [
				"loader/index.js",
				"loader/events.js",
				"loader/storage.js",
				"loader/layerManager.js",
				"loader/map.js",
				"loader/legend.js",
				"loader/markerLegend.js",
				"loader/popup.js",
				"loader/dismissables.js",
				{
					"name": "loader/settings.json",
					"config": [
						"DataMapsAllowExperimentalFeatures"
					]
				},
				"loader/util.js"
			],
			"messages": [
				"datamap-error-dataload",
				"datamap-legend-tab-locations",
				"datamap-legend-tab-checklist",
				"datamap-toggle-show-all",
				"datamap-toggle-hide-all",
				"datamap-toggle-caves",
				"datamap-layer-control",
				"datamap-layer-surface",
				"datamap-layer-cave",
				"datamap-popup-related-article",
				"datamap-popup-dismissed",
				"datamap-popup-mark-as-dismissed",
				"datamap-popup-marker-link-get",
				"datamap-popup-marker-link-copied",
				"datamap-coordinate-control-text",
				"datamap-control-reset-view",
				"datamap-control-centre-view",
				"datamap-checklist-prelude",
				"datamap-checklist-collect-all",
				"datamap-checklist-uncollect-all"
			],
			"targets": [ "desktop", "mobile" ]
		},

		"ext.ark.datamaps.bootstrap": {
			"es6": true,
			"dependencies": [
				"ext.ark.datamaps.core"
			],
			"packageFiles": [
				"bootstrap/main.js"
			],
			"targets": [ "desktop", "mobile" ]
		},

		"ext.ark.datamaps.inlineloader": {
			"es6": true,
			"dependencies": [
				"ext.ark.datamaps.core",
				"ext.ark.datamaps.bootstrap"
			],
			"packageFiles": [
				"inlineLoader/main.js"
			],
			"targets": [ "desktop", "mobile" ]
		}
	},

	"AutoloadNamespaces": {
		"MediaWiki\\Extension\\Ark\\DataMaps\\": "includes/"
	},

	"APIModules": {
		"queryDataMap": "MediaWiki\\Extension\\Ark\\DataMaps\\API\\ApiQueryDataMapEndpoint"
	},
	"ContentHandlers": {
		"datamap": "MediaWiki\\Extension\\Ark\\DataMaps\\Content\\DataMapContentHandler"
	},
	
	"callback": "MediaWiki\\Extension\\Ark\\DataMaps\\HookHandler::onRegistration",
	"Hooks": {
		"ParserFirstCallInit": "DataMapsHookHandler",
		"ContentHandlerDefaultModelFor": "DataMapsHookHandler",
		"CodeEditorGetPageLanguage": "MediaWiki\\Extension\\Ark\\DataMaps\\HookHandler::onCodeEditorGetPageLanguage"
	},
    "HookHandlers": {
        "DataMapsHookHandler": {
            "class": "MediaWiki\\Extension\\Ark\\DataMaps\\HookHandler"
        }
    },

	"config": {
		"DataMapsNamespaceId": {
			"description": "Namespace where data maps will be stored.",
			"value": -1
		},
		"DataMapsCacheType": {
			"description": "Cache type to use for queryDataMap API output. Defaults to CACHE_ANYTHING.",
			"value": -1
		},
		"DataMapsCacheTTL": {
			"description": "Time To Live for cached queryDataMap API (per title and revision) responses to be valid. Set to 0 to disable caching. Defaults to a day.",
			"value": 86400
		},
		"DataMapsExtendCacheTTL": {
			"description": "Settings to extend TTL of cached maps on requests close to expiry time. Set to false to disable.",
			"value": {
				"threshold": 43200,
				"override": 57600
			}
		},
		"DataMapsMarkerParserExpansionLimit": {
			"description": "Controls how big the parser output for a marker's description can get.",
			"value": 800
		},
		"DataMapsUseInProcessParserCache": {
			"description": "If enabled, uses a simple wikitext parser cache inside the process handling the request.",
			"value": true
		},
		"DataMapsReportTimingInfo": {
			"description": "Attaches data map marker processing time in API requests.",
			"value": false
		},
		"DataMapsDefaultFeatures": {
			"value": {
				"ShowCoordinates": true,
				"ShowLegendAlwaysAbove": false,
				"RequireCustomMarkerIDs": false
			}
		},
		"DataMapsAllowExperimentalFeatures": {
			"description": "Whether to enable experimental features.",
			"value": false
		}
	},

	"manifest_version": 2
}
